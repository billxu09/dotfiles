[pager]
pager = LESS='FSRX' less
attend = annotate, cat, diff, export, glog, log, qdiff, slog, dlog, gslog, sglog, df, nlog, outgoing, lg, show, lga
# note: this can be temporarily disabled with --pager=off

[ui]
username = Jamie Wong <jamiewong@khanacademy.org>
ignore = ~/dotfiles/.hgignore_global

[web]
#cacerts = ~/.hg/dummycert.pem

[extensions]
hgext.extdiff =
hgext.record =
hgext.mq =
color =
graphlog =
fetch =
hgext.churn =
#histedit = ~/src/histedit/hg_histedit.py
rebase =
pager =
progress =
hgext.purge =
hgext.shelve = ~/.hgext/hgshelve.py
hgext.collapse = ~/.hgext/collapse.py
hgext.crecord = ~/.hgext/crecord/
rdiff = $HOME/code/khan/devtools/mercurial-extensions-rdiff/rdiff.py
kilnauth = $HOME/code/khan/devtools/kilnauth.py
prompt = $HOME/dotfiles/hg-prompt/prompt.py

#[extdiff]
#cmd.opendiff = fmdiff

[alias]
show = log --stat --color=always -vpr
slog = log --style=$HOME/dotfiles/mercurial-cli-templates/map-cmdline.slog
nlog = log --style=$HOME/dotfiles/mercurial-cli-templates/map-cmdline.nlog
sglog = glog --style=$HOME/dotfiles/mercurial-cli-templates/map-cmdline.sglog
gslog = sglog
lga = glog --style=$HOME/dotfiles/mercurial-cli-templates/map-cmdline.lg
lg = lga --rev 'ancestors(.)'
dlog = log --style=$HOME/dotfiles/mercurial-cli-templates/map-cmdline.dlog
st = st -S
df = diff
nudge = push --rev .
wip = !hg shelve -n $(hg prompt '{bookmark}')-wip
unwip = !hg unshelve -n $(hg prompt '{bookmark}')-wip
today = !hg log --template '{rev} {desc|firstline|strip}\n' -r "sort(user('$(hg showconfig ui.username | sed 's/.*<\(.*\)>/\1/')') and date(-1), -date)"
retry-commit = !EDITOR="vim -c 'r $(hg root)/.hg/last-message.txt'" hg commit

# This assumes you have a clean working dir and that the commit was *just* made
amend-message = !hg log -r . --template '{desc}' > /tmp/commit && hg rollback && EDITOR="vim -c 'r /tmp/commit'" hg commit

[diff]
git = True

[auth]
kiln.prefix=https://khanacademy.kilnhg.com
kiln.username=jamiewong@khanacademy.org

[paths]
stable = https://khanacademy.kilnhg.com/Repo/Website/Group/stable
accuracy = https://khanacademy.kilnhg.com/Repo/Website/Group/accuracy-model
review = https://khanacademy.kilnhg.com/Repo/Website/Group/review
labs-cs = https://khanacademy.kilnhg.com/Code/Website/Group/labs-cs

[hooks]
pretxncommit.khanlint = $HOME/code/khan/devtools/khan-linter/khanlint.py

[hostfingerprints]
khanacademy.kilnhg.com = fe:ab:65:89:7c:6f:1a:21:a8:39:54:6c:2a:cb:ca:ae:e9:e5:f0:01
bitbucket.org = 24:9c:45:8b:9c:aa:ba:55:4e:01:6d:58:ff:e4:28:7d:2a:14:ae:3b
code.google.com = 97:1a:9f:06:54:23:96:b8:fa:3f:d8:78:c1:bf:84:34:4b:5e:cb:30

[bookmarks]
track.current = True
